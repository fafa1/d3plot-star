<!DOCTYPE>
    <meta charset="utf-8">
    <style>

    body {
    width: 960px;
    margin: auto;
    font-family: Arial;
    }
    #target {
    margin: 40px 0;
    }
    .chart {
    margin-bottom: 40px;
    }
    .star-title {
    font-size: 14px;
    }
    .star-label {
    font-size: 11px;
    }
    .star-origin {
    fill: #333;
    }
    .star-axis {
    stroke: #ccc;
    stroke-width: 2px;
    stroke-dasharray: 4 5;
    }
    .star-path {
    stroke: #444;
    stroke-width: 2px;
    fill: #709CB1;
    fill-opacity: 0.6;
    }
    </style>

    <body>
        <script src="http://d3js.org/d3.v3.min.js"></script>
        <script src="d3-starPlot.js"></script>
        <script>

        var margin = {
        top: 36,
        right: 50,
        bottom: 20,
        left: 50
        };
        var width = 260 - margin.left - margin.right;
        var height = 260 - margin.top - margin.bottom;
        var labelMargin = 20;

        var scale = d3.scale.linear()
        .domain([0, 1.4])
        .range([0, 100])

        d3.csv('data.csv')
        .row(function(d) {
            d.behavior = +d.Behavior
            d.socialCircumstances = +d.SocialCircumstances
            d.geneticsBiology = +d.GeneticsBiology
            d.medicalCare = +d.MedicalCare
            d.healthLiteracy = +d.HealthLiteracy
            d.access = +d.Access
            d.environment = +d.Environment

            return d;
        })
        .get(function(error, rows) {
            let star = d3.starPlot()
            .width(width)
            .accessors([
                function(d) { return scale(d.behavior); },
                function(d) { return scale(d.socialCircumstances); },
                function(d) { return scale(d.geneticsBiology); },
                function(d) { return scale(d.medicalCare); },
                function(d) { return scale(d.healthLiteracy); },
                function(d) { return scale(d.access); },
                function(d) { return scale(d.environment); }                   
            ])
            .labels([
                'Behavior',
                'Social Circumstances',
                'Genetics/Biology',
                'Medical Care',
                'Health Literacy',
                'Access',
                'Environment'
                               
            ])
            .title(function(d) { return d.Distillery; })
            .margin(margin)
            .labelMargin(labelMargin)

            rows.forEach(function(d, i) {
            star.includeLabels(i % 1 === 0 ? true : false);

            d3.select('#target').append('svg')
                .attr('class', 'chart')
                .attr('width', width + margin.left + margin.right)
                .attr('height', width + margin.top + margin.bottom)
                .append('g')
                .datum(d)
                .call(star)
            });
        });

        </script>
        <div id='target'></div>
</body>